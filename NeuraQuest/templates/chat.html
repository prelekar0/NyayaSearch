<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NeuraQuest</title>
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>


    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
    <style>
        body{
            font-family: 'Work Sans';
        }
    </style>
  </head>
  <body class="bg-gray-950 text-gray-100 font-sans h-screen">
    <!-- Navigation Bar -->
    <nav class="fixed w-full top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex-shrink-0 flex items-center">
            <a href="#" class="text-xl font-bold text-white">NeuraQuest</a>
          </div>
          <div class="hidden md:flex md:items-center md:space-x-6 text-md">
            <a href="#about" class="text-gray-300 hover:text-blue-400 transition duration-300 text-xs flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="w-4 h-4 mr-2 fill-white"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/></svg>
                Go Back to Home
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="flex flex-row min-h-screen pt-20 relative z-10">
      <!-- Chat History -->
      <div class="w-1/4 bg-gray-800 p-4 overflow-y-auto">
        <h2 class="text-xl font-bold mb-4">Chat History</h2>
        <div id="chat-history" class="space-y-4">
          <!-- Chat history will be dynamically updated here -->
        </div>
      </div>

      <!-- Chat Interface -->
      <div class="w-3/4 flex flex-col justify-between p-4">
        <div id="chat-window" class="flex-grow overflow-y-auto mb-4">
          <!-- Chat messages will be dynamically added here -->
        </div>
        <div class="flex fixed bottom-0 right-0 w-full">
          <input id="user-input" type="text" class="flex-grow p-2 rounded-lg bg-gray-700 text-white" placeholder="Type your message here..." />
          <button onclick="sendMessage()" class="ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Send</button>
        </div>
      </div>
    </div>

    <script>
      const chatHistory = document.getElementById('chat-history');
      const chatWindow = document.getElementById('chat-window');
      const userInput = document.getElementById('user-input');

      function addUserChat(message) {
        const userMessage = document.createElement('div');
        userMessage.className = 'bg-gray-700 p-2 rounded-lg text-white self-end';
        userMessage.textContent = message;
        chatWindow.appendChild(userMessage);
        chatWindow.scrollTop = chatWindow.scrollHeight;
      }

      function addAIResponse(response) {
        const aiMessage = document.createElement('div');
        aiMessage.className = 'bg-gray-600 p-2 rounded-lg text-white self-start';
        aiMessage.textContent = response;
        chatWindow.appendChild(aiMessage);
        chatWindow.scrollTop = chatWindow.scrollHeight;
      }

      function updateChatHistory() {
        // This function will update the chat history on the left side
        // For now, it just clears and re-adds all messages from the chat window
        chatHistory.innerHTML = '';
        const messages = chatWindow.children;
        for (let i = 0; i < messages.length; i++) {
          const messageClone = messages[i].cloneNode(true);
          chatHistory.appendChild(messageClone);
        }
      }

      function sendMessage() {
        const message = userInput.value;
        if (message.trim() !== '') {
          addUserChat(message);
          userInput.value = '';
          // Simulate AI response
          setTimeout(() => {
            const aiResponse = 'This is a simulated AI response.';
            addAIResponse(aiResponse);
            updateChatHistory();
          }, 1000);
        }
      }
    </script>
  </body>
</html>
